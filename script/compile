#!/usr/bin/env ratch

# compile extensions

main :compile => [:compile_scanner] do
  puts "Compile complete."
end

task :compile_scanner do
  file = nil
  cd("ext/mailscanner/tmail") do
    ruby "extconf.rb"
    make

    #file = glob("mailscanner.#{dlext}").first
    #file = File.expand_path(file) if file
  end

  #if file
  #  mkdir_p("lib/tmail/#{arch}")
  #  mv(file, "lib/tmail/#{arch}/")
  #end
end

def dlext
  Config::CONFIG['DLEXT']
end

def arch
  Config::CONFIG['arch']
end

